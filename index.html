<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOT BTC - TEST TELEGRAM</title>
    <style>
        body { background: #0b0e11; color: white; font-family: sans-serif; text-align: center; padding: 15px; }
        .box { border: 2px solid #f0b90b; border-radius: 15px; padding: 20px; background: #1e2329; margin-bottom: 15px; }
        .price { font-size: 35px; font-weight: bold; color: #f0b90b; }
        .rsi { font-size: 24px; color: #2ebd85; margin: 10px 0; }
        input { width: 100%; padding: 15px; margin: 10px 0; border-radius: 8px; border: 1px solid #444; background: #2b3139; color: white; font-size: 16px; }
        button { width: 100%; padding: 18px; background: #f0b90b; font-weight: bold; border-radius: 8px; border: none; cursor: pointer; font-size: 18px; }
        #status { font-size: 13px; color: #848e9c; margin-top: 15px; border-top: 1px solid #333; padding-top: 10px; }
    </style>
</head>
<body>

    <div class="box">
        <div style="color: #848e9c; font-size: 12px;">BTC/USD EXNESS</div>
        <div id="price" class="price">ƒêANG T·∫¢I...</div>
        <div id="rsi" class="rsi">RSI: --</div>
    </div>

    <input type="number" id="exPrice" placeholder="Nh·∫≠p gi√° BTC Exness hi·ªán t·∫°i...">
    <button onclick="sync()">K√çCH HO·∫†T & TEST TELE</button>
    
    <div id="status">Tr·∫°ng th√°i: ƒêang ch·ªù bro b·∫•m n√∫t...</div>

    <script>
        const TOKEN = "7553580554:AAH3kP7CidTzUvF3LzDOnn8X_80-O96M78E";
        const CHAT_ID = "5919747180";
        let offset = 0;

        async function sync() {
            const val = parseFloat(document.getElementById('exPrice').value);
            if (!val) return alert("Nh·∫≠p gi√° Exness ƒë√£ bro!");
            
            try {
                const r = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=BTCUSDT');
                const d = await r.json();
                offset = val - parseFloat(d.price);
                
                document.getElementById('status').innerText = "üöÄ ƒê√É G·ª¨I TIN NH·∫ÆN TH·ª¨ NGHI·ªÜM...";
                // G·ª≠i tin nh·∫Øn test ngay l·∫≠p t·ª©c
                send("üîî TEST: Bot ƒë√£ th√¥ng n√≤ng! ƒêang b·∫Øt ƒë·∫ßu qu√©t k√®o cho bro nh√©!");
                
                alert("ƒê√£ g·ª≠i tin nh·∫Øn Test v·ªÅ Telegram! N·∫øu kh√¥ng th·∫•y b√°o, h√£y ki·ªÉm tra l·∫°i Token/ID.");
                update();
            } catch (e) { alert("L·ªói k·∫øt n·ªëi s√†n!"); }
        }

        async function update() {
            try {
                const r = await fetch('https://api.binance.com/api/v3/klines?symbol=BTCUSDT&interval=1m&limit=30');
                const data = await r.json();
                const prices = data.map(d => parseFloat(d[4]));
                const lastPrice = prices[prices.length - 1];

                let g = 0, l = 0;
                for (let i = prices.length - 14; i < prices.length; i++) {
                    let d = prices[i] - prices[i-1];
                    if (d >= 0) g += d; else l -= d;
                }
                const rsiVal = 100 - (100 / (1 + (g / l)));

                document.getElementById('price').innerText = (lastPrice + offset).toFixed(2);
                document.getElementById('rsi').innerText = "RSI: " + rsiVal.toFixed(2);

                // Ng∆∞·ª°ng si√™u nh·∫°y: 55/45 ƒë·ªÉ c√≥ 10 l·ªánh/ng√†y
                if (rsiVal >= 55) send("üöÄ SELL BTC: " + (lastPrice + offset).toFixed(2) + " (RSI: " + rsiVal.toFixed(2) + ")");
                if (rsiVal <= 45) send("üî• BUY BTC: " + (lastPrice + offset).toFixed(2) + " (RSI: " + rsiVal.toFixed(2) + ")");

            } catch (e) { console.log("ƒêang qu√©t..."); }
        }

        function send(m) {
            fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(m)}`);
        }

        setInterval(update, 5000); // Qu√©t m·ªói 5 gi√¢y
    </script>
</body>
</html>
