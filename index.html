<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOLD & BTC SCALPER</title>
    <style>
        body { background: #0b0e11; color: white; font-family: sans-serif; text-align: center; padding: 15px; }
        .box { border: 2px solid #f0b90b; border-radius: 15px; padding: 15px; background: #1c1f24; margin-bottom: 15px; }
        .price { font-size: 30px; font-weight: bold; color: #f0b90b; }
        .rsi { font-size: 20px; color: #2ebd85; margin: 5px 0; }
        input { width: 80%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #444; background: #1e2329; color: white; }
        button { width: 90%; padding: 15px; background: #f0b90b; font-weight: bold; border-radius: 10px; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <div class="box">
        <div style="color: #848e9c;">XAU/USD (GOLD)</div>
        <div id="goldPrice" class="price">--</div>
        <div id="goldRsi" class="rsi">RSI: --</div>
        <input type="number" id="exGold" step="0.01" placeholder="Gi√° V√†ng Exness...">
    </div>

    <div class="box">
        <div style="color: #848e9c;">BTC/USD</div>
        <div id="btcPrice" class="price">--</div>
        <div id="btcRsi" class="rsi">RSI: --</div>
        <input type="number" id="exBtc" step="0.01" placeholder="Gi√° BTC Exness...">
    </div>

    <button onclick="startAll()">K√çCH HO·∫†T SONG M√É</button>
    <div id="status" style="margin-top: 15px; font-size: 12px; color: #848e9c;">ƒêang ch·ªù bro...</div>

    <script>
        const TOKEN = "8586899878:AAHONzWJqzUMswUPMjn5xaWvYrwDHSH4OYE";
        const CHAT_ID = "7994694689";
        let goldOffset = 0, btcOffset = 0;
        let lastActionGold = "", lastActionBtc = "";

        async function startAll() {
            const gVal = parseFloat(document.getElementById('exGold').value);
            const bVal = parseFloat(document.getElementById('exBtc').value);
            
            // Sync Gold
            const rg = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=PAXGUSDT');
            const dg = await rg.json();
            goldOffset = gVal - parseFloat(dg.price);

            // Sync BTC
            const rb = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=BTCUSDT');
            const db = await rb.json();
            btcOffset = bVal - parseFloat(db.price);

            document.getElementById('status').innerText = "‚úÖ ƒê√É K√çCH HO·∫†T C·∫¢ V√ÄNG & BTC";
            sendTele("üöÄ H·ªÜ TH·ªêNG ƒê√É CH·∫†Y!\nüí∞ V√†ng & BTC ƒëang ƒë∆∞·ª£c qu√©t...");
            setInterval(updateAll, 5000); // Qu√©t m·ªói 5s
        }

        async function updateAll() {
            // Logic qu√©t V√†ng
            const goldData = await getRSI('PAXGUSDT');
            processSignal("GOLD", goldData.rsi, goldData.last + goldOffset, 63, 37, 0.003, 0.007);

            // Logic qu√©t BTC
            const btcData = await getRSI('BTCUSDT');
            processSignal("BTC", btcData.rsi, btcData.last + btcOffset, 65, 35, 0.005, 0.010);
        }

        async function getRSI(symbol) {
            const r = await fetch(`https://api.binance.com/api/v3/klines?symbol=${symbol}&interval=1m&limit=30`);
            const d = await r.json();
            const p = d.map(x => parseFloat(x[4]));
            let g = 0, l = 0;
            for (let i = p.length - 14; i < p.length; i++) {
                let diff = p[i] - p[i-1];
                if (diff >= 0) g += diff; else l -= diff;
            }
            return { rsi: 100 - (100 / (1 + (g / l))), last: p[p.length - 1] };
        }

        function processSignal(name, rsi, price, high, low, slPct, tpPct) {
            document.getElementById(name.toLowerCase() + 'Price').innerText = price.toFixed(2);
            document.getElementById(name.toLowerCase() + 'Rsi').innerText = "RSI: " + rsi.toFixed(2);

            let action = "";
            if (rsi >= high) action = "SELL";
            else if (rsi <= low) action = "BUY";

            let lastVar = name === "GOLD" ? lastActionGold : lastActionBtc;

            if (action !== "" && action !== lastVar) {
                const sl = action === "SELL" ? price * (1 + slPct) : price * (1 - slPct);
                const tp = action === "SELL" ? price * (1 - tpPct) : price * (1 + tpPct);
                
                let m = `üîî [K√àO ${name} ${action}]\n`;
                m += `üìç Entry: ${price.toFixed(2)}\n`;
                m += `üö´ SL: ${sl.toFixed(2)}\n`;
                m += `‚úÖ TP: ${tp.toFixed(2)}\n`;
                m += `üìä RSI: ${rsi.toFixed(2)}`;
                
                sendTele(m);
                if (name === "GOLD") lastActionGold = action; else lastActionBtc = action;
            } else if (rsi > 45 && rsi < 55) {
                if (name === "GOLD") lastActionGold = ""; else lastActionBtc = "";
            }
        }

        function sendTele(m) {
            fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(m)}`);
        }
    </script>
</body>
</html>
